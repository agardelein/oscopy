# First read data from IRF540 simulation
print "*** Reading files and setting plots"
o_read demo/irf540.dat
o_add vgs
o_create
o_add iRD
o_add vgs
o_add vgs
o_add vds
print "*** Fig 2 layout to quad"
o_layout quad
print "*** Done"
# Oops, forgot a signal in figure 2 graph 3
o_select 2-3
o_insert vds
# Plot filter response
o_read demo/ac.dat
o_create
o_add vout
o_scale loglog
# Plot square signal, its FFT and a math signal
o_read demo/tran.dat
o_create
o_add vsqu
vsqufft=fft(vsqu)
o_import vsqufft
o_add vsqufft
o_range 0 15 -.002 .010
o_unit V
v1=vsqu*3+10
o_import v1
o_add v1
o_unit V
print "*** Insert and remove a signal"
o_select 4-1
o_insert v1
o_remove v1
# Create from reference signal. Note with Signal unit can be defined
vs=sin(vsqu.ref*1e6)
vs.ref = vsqu.ref
vs2=Signal(sin(vsqu.ref*1e6), 'V')
vs2.ref = vsqu.ref
o_import vs
o_import vs2
o_create vs
o_unit V
print "*** List of figures"
o_figlist
# Create a copy of vout and freeze it
vo=vout
o_import vo
o_freeze vo
o_select 3-1
o_insert vo
o_siglist
# Updating
print "*** Now change C value in schematic and rerun gnetlist + gnucap"
#pause...
print "*** Updating"
#o_update
print "*** Now look at figure 3"
#plot
# Saving results
o_write gnucap (ow:1) demo/res.dat v1,vsqu
